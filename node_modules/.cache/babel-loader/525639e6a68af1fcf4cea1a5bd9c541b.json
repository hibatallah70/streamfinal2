{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python310\\\\version video+blog+ lobby+chat1\\\\src\\\\pages\\\\meeting\\\\stream-player.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useMemo, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nStreamPlayer.propTypes = {\n  uid: PropTypes.number.isRequired\n};\nexport default function StreamPlayer(props) {\n  _s();\n\n  const {\n    uid,\n    isLocal,\n    videoTrack,\n    audioTrack,\n    muteVideo,\n    muteAudio,\n    showInfo,\n    rtcClient\n  } = props;\n  useMemo(() => {\n    if (videoTrack != null) {\n      if (muteVideo == true) {\n        videoTrack.stop();\n      } else if (muteVideo == false) {\n        videoTrack.play(`stream-player-${uid}`);\n      }\n    }\n  }, [muteVideo, videoTrack]);\n  useMemo(() => {\n    if (videoTrack != null) {\n      if (muteAudio == true) {\n        audioTrack.stop();\n      } else if (muteAudio == false) {\n        audioTrack.play();\n      }\n    }\n  }, [muteAudio, audioTrack]);\n  useEffect(() => {\n    if (videoTrack != null) {\n      if (muteVideo == true) {\n        videoTrack.stop();\n      } else if (muteVideo == false) {\n        videoTrack.play(`stream-player-${uid}`);\n      }\n    }\n  }, [muteVideo, videoTrack]);\n  const [state, setState] = useState({\n    accessDelay: 0,\n    fps: 0,\n    resolution: 0\n  });\n  const analytics = useMemo(() => state, [state]);\n  useEffect(() => {\n    const timer = setInterval(() => {\n      if (isLocal) {\n        const stats = rtcClient.getLocalVideoStats();\n        const width = stats.captureResolutionWidth;\n        const height = stats.captureResolutionHeight;\n        const fps = stats.captureFrameRate;\n        setState({\n          accessDelay: `${stats.accessDelay ? stats.accessDelay : 0}`,\n          resolution: `${width}x${height}`,\n          fps: `${fps || 0}`\n        });\n      } else {\n        const stats = rtcClient.getRemoteVideoStats();\n        const width = stats.captureResolutionWidth;\n        const height = stats.captureResolutionHeight;\n        const fps = stats.captureFrameRate;\n        setState({\n          accessDelay: `${stats.accessDelay ? stats.accessDelay : 0}`,\n          resolution: `${width}x${height}`,\n          fps: `${fps || 0}`\n        });\n      }\n    }, 500);\n    return () => {\n      clearInterval(timer);\n    };\n  }, [isLocal, rtcClient]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'stream-player',\n    id: `stream-player-${uid}`,\n    children: [props.children, showInfo ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: props.className,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"SD-RTN delay: \", analytics.accessDelay, \"ms\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Video: \", analytics.fps, \"fps \", analytics.resolution]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stream-uid\",\n      children: [\"UID: \", uid]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n}\n\n_s(StreamPlayer, \"2hGV+u9LFGYXJ41y9p5fa1CyswE=\");\n\n_c = StreamPlayer;\n\nvar _c;\n\n$RefreshReg$(_c, \"StreamPlayer\");","map":{"version":3,"names":["React","useMemo","useState","useEffect","PropTypes","StreamPlayer","propTypes","uid","number","isRequired","props","isLocal","videoTrack","audioTrack","muteVideo","muteAudio","showInfo","rtcClient","stop","play","state","setState","accessDelay","fps","resolution","analytics","timer","setInterval","stats","getLocalVideoStats","width","captureResolutionWidth","height","captureResolutionHeight","captureFrameRate","getRemoteVideoStats","clearInterval","children","className"],"sources":["C:/Users/hp/AppData/Local/Programs/Python/Python310/version video+blog+ lobby+chat1/src/pages/meeting/stream-player.jsx"],"sourcesContent":["import React, {useMemo, useState, useEffect} from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nStreamPlayer.propTypes = {\r\n    uid: PropTypes.number.isRequired\r\n}\r\n\r\nexport default function StreamPlayer(props) {\r\n    const {uid, isLocal, videoTrack, audioTrack, muteVideo, muteAudio, showInfo, rtcClient} = props\r\n\r\n    useMemo(() => {\r\n        if (videoTrack != null) {\r\n            if (muteVideo == true) {\r\n                videoTrack.stop()\r\n            } else if (muteVideo == false) {\r\n                videoTrack.play(`stream-player-${uid}`)\r\n            }\r\n        }\r\n    }, [muteVideo, videoTrack])\r\n\r\n    useMemo(() => {\r\n        if (videoTrack != null) {\r\n            if (muteAudio == true) {\r\n                audioTrack.stop()\r\n            } else if (muteAudio == false) {\r\n                audioTrack.play()\r\n            }\r\n        }\r\n    }, [muteAudio, audioTrack])\r\n\r\n    useEffect(() => {\r\n        if (videoTrack != null) {\r\n            if (muteVideo == true) {\r\n                videoTrack.stop()\r\n            } else if (muteVideo == false) {\r\n                videoTrack.play(`stream-player-${uid}`)\r\n            }\r\n        }\r\n    }, [muteVideo, videoTrack])\r\n\r\n    const [state, setState] = useState({\r\n        accessDelay: 0,\r\n        fps: 0,\r\n        resolution: 0\r\n    })\r\n\r\n    const analytics = useMemo(() => state, [state])\r\n\r\n    useEffect(() => {\r\n        const timer = setInterval(() => {\r\n            if (isLocal) {\r\n                const stats = rtcClient.getLocalVideoStats()\r\n                const width = stats.captureResolutionWidth\r\n                const height = stats.captureResolutionHeight\r\n                const fps = stats.captureFrameRate\r\n                setState({\r\n                    accessDelay: `${stats.accessDelay ? stats.accessDelay : 0}`,\r\n                    resolution: `${width}x${height}`,\r\n                    fps: `${fps || 0}`\r\n                })\r\n            } else {\r\n                const stats = rtcClient.getRemoteVideoStats()\r\n                const width = stats.captureResolutionWidth\r\n                const height = stats.captureResolutionHeight\r\n                const fps = stats.captureFrameRate\r\n                setState({\r\n                    accessDelay: `${stats.accessDelay ? stats.accessDelay : 0}`,\r\n                    resolution: `${width}x${height}`,\r\n                    fps: `${fps || 0}`\r\n                })\r\n            }\r\n        }, 500)\r\n\r\n        return () => {\r\n            clearInterval(timer)\r\n        }\r\n    }, [isLocal, rtcClient])\r\n\r\n    return (\r\n        <div\r\n            className={'stream-player'}\r\n            id={`stream-player-${uid}`}\r\n        >\r\n            {props.children}\r\n            {showInfo ? (\r\n                <div>\r\n                    <div className={props.className}>\r\n                        <span>SD-RTN delay: {analytics.accessDelay}ms</span>\r\n                        <span>\r\n              Video: {analytics.fps}fps {analytics.resolution}\r\n            </span>\r\n                    </div>\r\n                </div>\r\n            ) : null}\r\n            <div className=\"stream-uid\">UID: {uid}</div>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}